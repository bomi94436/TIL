<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>타입 호환성 | Today I Learned</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Study, summary and write down">
    
    <link rel="preload" href="/TIL/assets/css/0.styles.2cf7e4c8.css" as="style"><link rel="preload" href="/TIL/assets/js/app.977debce.js" as="script"><link rel="preload" href="/TIL/assets/js/2.30a1a0ba.js" as="script"><link rel="preload" href="/TIL/assets/js/18.18b1b1b3.js" as="script"><link rel="prefetch" href="/TIL/assets/js/10.4516091a.js"><link rel="prefetch" href="/TIL/assets/js/11.1935856b.js"><link rel="prefetch" href="/TIL/assets/js/12.685030e5.js"><link rel="prefetch" href="/TIL/assets/js/13.314b2e4e.js"><link rel="prefetch" href="/TIL/assets/js/14.89651f01.js"><link rel="prefetch" href="/TIL/assets/js/15.c9b2f0ae.js"><link rel="prefetch" href="/TIL/assets/js/16.bb45622b.js"><link rel="prefetch" href="/TIL/assets/js/17.0aaa5be1.js"><link rel="prefetch" href="/TIL/assets/js/19.ddddc932.js"><link rel="prefetch" href="/TIL/assets/js/3.dca12a3b.js"><link rel="prefetch" href="/TIL/assets/js/4.8015288e.js"><link rel="prefetch" href="/TIL/assets/js/5.c44f34e2.js"><link rel="prefetch" href="/TIL/assets/js/6.60ea826e.js"><link rel="prefetch" href="/TIL/assets/js/7.14b9824c.js"><link rel="prefetch" href="/TIL/assets/js/8.0f2ac5d2.js"><link rel="prefetch" href="/TIL/assets/js/9.a21b69a7.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.2cf7e4c8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/TIL/" class="home-link router-link-active"><!----> <span class="site-name">Today I Learned</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/bomi94436" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/bomi94436" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Typescript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL/Typescript/basic-types.html" class="sidebar-link">기본 타입</a></li><li><a href="/TIL/Typescript/interfaces.html" class="sidebar-link">인터페이스</a></li><li><a href="/TIL/Typescript/classes.html" class="sidebar-link">클래스</a></li><li><a href="/TIL/Typescript/functions.html" class="sidebar-link">함수</a></li><li><a href="/TIL/Typescript/generics.html" class="sidebar-link">제네릭</a></li><li><a href="/TIL/Typescript/enums.html" class="sidebar-link">열거형</a></li><li><a href="/TIL/Typescript/type-compatibility.html" aria-current="page" class="active sidebar-link">타입 호환성</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/Typescript/type-compatibility.html#시작하기" class="sidebar-link">시작하기</a></li><li class="sidebar-sub-header"><a href="/TIL/Typescript/type-compatibility.html#두-함수-비교-comparing-two-functions" class="sidebar-link">두 함수 비교(Comparing two functions)</a></li><li class="sidebar-sub-header"><a href="/TIL/Typescript/type-compatibility.html#열거형-enums" class="sidebar-link">열거형(Enums)</a></li><li class="sidebar-sub-header"><a href="/TIL/Typescript/type-compatibility.html#클래스-classes" class="sidebar-link">클래스(Classes)</a></li><li class="sidebar-sub-header"><a href="/TIL/Typescript/type-compatibility.html#제네릭-generics" class="sidebar-link">제네릭(Generics)</a></li></ul></li><li><a href="/TIL/Typescript/type-inference.html" class="sidebar-link">타입 추론</a></li><li><a href="/TIL/Typescript/advanced-types.html" class="sidebar-link">고급 타입</a></li><li><a href="/TIL/Typescript/symbols.html" class="sidebar-link">심볼</a></li><li><a href="/TIL/Typescript/iterators-and-generators.html" class="sidebar-link">이터레이터와 제네레이터</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Book</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="타입-호환성"><a href="#타입-호환성" class="header-anchor">#</a> 타입 호환성</h1> <div style="text-align:right;">2020.12.24</div> <p>📌 typescript의 타입 호환성은 구조적 서브 타이핑(subtyping)을 기반으로 함</p> <p>📌 구조적 타이핑: 오직 멤버만으로 타입을 관계시키는 방식(↔ 명목적 타이핑(nominal typing))</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">interface</span> <span class="token class-name">Named</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p<span class="token operator">:</span> Named<span class="token punctuation">;</span>
<span class="token comment">// OK, 구조적 타이핑이기 때문</span>
p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="건전성에-대한-참고사항-a-note-on-soundness"><a href="#건전성에-대한-참고사항-a-note-on-soundness" class="header-anchor">#</a> 건전성에 대한 참고사항(A note on soundness)</h3> <p>📌 typescript의 타입 시스템은 컴파일 시간에 확인할 수 없는 특정 작업(&quot;건전&quot;하지 않은 작업)을 안전하게 수행할 수 있음</p> <h2 id="시작하기"><a href="#시작하기" class="header-anchor">#</a> 시작하기</h2> <p>📌 typescript의 구조적 타입 시스템의 기본 규칙은 <code>y</code>가 최소한 <code>x</code>와 동일한 멤버를 가지고 있다면 <code>x</code>와 <code>y</code>는 호환됨:</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">interface</span> <span class="token class-name">Named</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> x<span class="token operator">:</span> Named<span class="token punctuation">;</span>
<span class="token comment">// y의 추론된 타입: { name: string; location: string; }</span>
<span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;Alice&quot;</span><span class="token punctuation">,</span> location<span class="token operator">:</span> <span class="token string">&quot;Seattle&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
x <span class="token operator">=</span> y<span class="token punctuation">;</span> <span class="token comment">// OK</span>
</code></pre></div><p>📌 호환성을 검사할 때는 오직 대상 타입의 멤버(아래의 경우엔 <code>Named</code>)만 고려됨</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token operator">:</span> Named</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, &quot;</span> <span class="token operator">+</span> n<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">greet</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK</span>
</code></pre></div><h2 id="두-함수-비교-comparing-two-functions"><a href="#두-함수-비교-comparing-two-functions" class="header-anchor">#</a> 두 함수 비교(Comparing two functions)</h2> <p>📌 매개변수의 이름은 고려하지 않고 타입만 검사함</p> <p>📌 아래의 예시의 두 번째 할당에서 <code>y</code>는 <code>x</code>에 없는 두 번째 필수적인 매개변수를 가지고 있기 때문에 <code>x</code>에 <code>y</code>를 할당하는 것이 허용되지 않아 오류가 발생함</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">let</span> <span class="token function-variable function">x</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token function-variable function">y</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">b<span class="token operator">:</span> number<span class="token punctuation">,</span> s<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>

y <span class="token operator">=</span> x<span class="token punctuation">;</span> <span class="token comment">// OK</span>
x <span class="token operator">=</span> y<span class="token punctuation">;</span> <span class="token comment">// ❌ error</span>
</code></pre></div><blockquote><p><code>y = x</code>처럼 매개변수를 버리는 것이 허용되는 이유:
함수의 추가 매개변수를 무시하는 것이 실제로 javascript에선 일반적이기 때문</p></blockquote> <p>📌 타입 시스템은 원본 함수의 반환 타입이 대상 타입의 반환 타입의 하위 타입이 되도록 해야 함</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">let</span> <span class="token function-variable function">x</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;Alice&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token function-variable function">y</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;Alice&quot;</span><span class="token punctuation">,</span> location<span class="token operator">:</span> <span class="token string">&quot;Seattle&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

x <span class="token operator">=</span> y<span class="token punctuation">;</span> <span class="token comment">// 성공</span>
y <span class="token operator">=</span> x<span class="token punctuation">;</span> <span class="token comment">// 오류, x()는 location 프로퍼티가 없습니다.</span>
</code></pre></div><h3 id="함수-매개변수의-bivariance-function-parameter-bibariance"><a href="#함수-매개변수의-bivariance-function-parameter-bibariance" class="header-anchor">#</a> 함수 매개변수의 Bivariance (Function parameter bibariance)</h3> <p>📌 함수 매개변수의 타입을 비교할 때, 원본 매개변수에 대상 매개변수를 할당하거나 이 반대로 할당할 수 있음(=양변성을 가짐)</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">enum</span> EventType <span class="token punctuation">{</span>
  Mouse<span class="token punctuation">,</span>
  Keyboard<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Event</span> <span class="token punctuation">{</span>
  timestamp<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">MouseEvent</span> <span class="token keyword">extends</span> <span class="token class-name">Event</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">KeyEvent</span> <span class="token keyword">extends</span> <span class="token class-name">Event</span> <span class="token punctuation">{</span>
  keyCode<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">listenEvent</span><span class="token punctuation">(</span>eventType<span class="token operator">:</span> EventType<span class="token punctuation">,</span> <span class="token function-variable function">handler</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">n<span class="token operator">:</span> Event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span>

<span class="token comment">// 바람직하진 않지만 유용하고 일반적임</span>
<span class="token function">listenEvent</span><span class="token punctuation">(</span>EventType<span class="token punctuation">.</span>Mouse<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e<span class="token operator">:</span> MouseEvent</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 건전성 측면에서 바람직하지 않은 대안</span>
<span class="token function">listenEvent</span><span class="token punctuation">(</span>EventType<span class="token punctuation">.</span>Mouse<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e<span class="token operator">:</span> Event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e <span class="token keyword">as</span> MouseEvent<span class="token punctuation">)</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>e <span class="token keyword">as</span> MouseEvent<span class="token punctuation">)</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">listenEvent</span><span class="token punctuation">(</span>EventType<span class="token punctuation">.</span>Mouse<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token operator">:</span> MouseEvent</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token punctuation">(</span><span class="token parameter">e<span class="token operator">:</span> Event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 여전히 허용되지 않음 (명확한 오류). 완전히 호환되지 않는 타입에 적용되는 타입 안전성(Type safety)</span>
<span class="token function">listenEvent</span><span class="token punctuation">(</span>EventType<span class="token punctuation">.</span>Mouse<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>📌 <code>&quot;strictFunctionTypes&quot;: false</code>를 설정하면 <code>Event</code> 타입을 가지는 매개변수 자리에 <code>Event</code>의 서브타입인 <code>MouseEvent</code>를 할당해도 오류가 나지 않음</p> <h2 id="열거형-enums"><a href="#열거형-enums" class="header-anchor">#</a> 열거형(Enums)</h2> <p>📌 열거형과 숫자는 서로 호환됨</p> <p>📌 다른 열거형 타입의 열거형 값은 호환되지 않음</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">enum</span> Status <span class="token punctuation">{</span>
  Ready<span class="token punctuation">,</span>
  Waiting<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">enum</span> Color <span class="token punctuation">{</span>
  Red<span class="token punctuation">,</span>
  Blue<span class="token punctuation">,</span>
  Green<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> stat <span class="token operator">=</span> Status<span class="token punctuation">.</span>Ready<span class="token punctuation">;</span>
stat <span class="token operator">=</span> Color<span class="token punctuation">.</span>Green<span class="token punctuation">;</span> <span class="token comment">// ❌ error</span>
</code></pre></div><h2 id="클래스-classes"><a href="#클래스-classes" class="header-anchor">#</a> 클래스(Classes)</h2> <p>📌 클래스 타입의 두 개의 객체를 비교할 때, 오직 인스턴스 멤버만 비교됨</p> <p>📌 정적인 멤버와 생성자는 호환성에 영향을 주지 않음</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  feet<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token operator">:</span> string<span class="token punctuation">,</span> numFeet<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Size</span> <span class="token punctuation">{</span>
  feet<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">numFeet<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> a<span class="token operator">:</span> Animal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token string">&quot;cat&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> s<span class="token operator">:</span> Size <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Size</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

a <span class="token operator">=</span> s<span class="token punctuation">;</span> <span class="token comment">// OK</span>
s <span class="token operator">=</span> a<span class="token punctuation">;</span> <span class="token comment">// OK</span>
</code></pre></div><h3 id="클래스의-private-멤버와-protected-멤버-private-and-protected-members-in-classes"><a href="#클래스의-private-멤버와-protected-멤버-private-and-protected-members-in-classes" class="header-anchor">#</a> 클래스의 <code>private</code> 멤버와 <code>protected</code> 멤버(Private and protected members in classes)</h3> <p>📌 클래스 인스턴스의 호환성을 검사할 때 대상 타입에 <code>private</code>나 멤버가 있다면, 원본 타입 또한 동일 클래스에서 비롯된 <code>private</code> 멤버가 있어야 함(<code>protected</code>도 같음)</p> <p>📌 따라서 클래스는 상위 클래스와는 호환 가능하지만 같은 형태를 가진 다른 상속 계층 구조의 클래스와는 호환되지 않음</p> <h2 id="제네릭-generics"><a href="#제네릭-generics" class="header-anchor">#</a> 제네릭(Generics)</h2> <p>📌 typescript는 구조적 타입 시스템이기 때문에, 타입 매개변수는 멤버의 타입의 일부로 사용할 때 결과 타입에 영향을 줌</p> <p>타입 인수가 지정된 제네릭 타입은 비-제네릭 타입처럼 동작함</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">interface</span> <span class="token class-name">Empty<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> x<span class="token operator">:</span> Empty<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>number</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> = </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain-text">;
let y: Empty</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> = </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain-text">;

x = y; // OK, y는 x의 구조와 대응하기 때문
</span></code></pre></div><div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">interface</span> <span class="token class-name">NotEmpty<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  data<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> x<span class="token operator">:</span> NotEmpty<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>number</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> = </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain-text">;
let y: NotEmpty</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> = </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain-text">;

x = y; // 오류, x와 y 는 호환되지 않음
</span></code></pre></div><div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">let</span> <span class="token function-variable function">identity</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">T</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">(x: T): T </span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token plain-text">;

let reverse = function</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">U</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">(y: U): U </span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token plain-text">;

identity = reverse; // 성공, (x: any) =&gt; any는  (y: any) =&gt; any와 대응하기 때문
</span></code></pre></div><blockquote><p>참고자료 출처<br><a href="https://typescript-handbook-ko.org/pages/type-compatibility.html" target="_blank" rel="noopener noreferrer">Typescript-Handbook-ko - Type Compatibility<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br><a href="https://edykim.com/ko/post/what-is-coercion-and-anticommunism/" target="_blank" rel="noopener noreferrer">매일 성장하기 - 공변성과 반공변성은 무엇인가?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/TIL/Typescript/enums.html" class="prev">
        열거형
      </a></span> <span class="next"><a href="/TIL/Typescript/type-inference.html">
        타입 추론
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/TIL/assets/js/app.977debce.js" defer></script><script src="/TIL/assets/js/2.30a1a0ba.js" defer></script><script src="/TIL/assets/js/18.18b1b1b3.js" defer></script>
  </body>
</html>
